---
title: VPCのまとめ
date: '2020-09-25T00:00:00.000Z'
description: 'Amazon Virtual Private Cloud の勉強も兼ねてまとめてみました.'
group: 'blog'
---

## 概要

VPC: Amazon Virtual Private Cloud

プライベートなネットワークを AWS 内に作成できる。

インターネットゲートウェイ( IGW ) で、インターネットに接続できる。

仮想プライベートゲートウェイ( VGW ) で、Direct Connect や VPN 経由でインターネットに出ることなく各拠点のネットワークに接続することが可能。

ネットワーク空間を構築する際は、可能な限り大きなサイズ(/16)で作成したほうが良い。

確保した空間が小さく、IP アドレスが不足した場合、あとから拡張するのは困難。

## IP アドレス（CIDR ブロック）

IP アドレスは、クラス A(10.0.0.0~10.255.255.255), クラス B(172.16.0.0~172.31.255.255), クラス C(192.168.0.0~192.168.255.255)が使える。

ただし、クラス A でも /8 で CIDR ブロックを取ることができず、/16 でなければならない。

## サブネット

サブネットは、VPC 内部に作るアドレスレンジである。

VPC では、/16 ~/28 まで設定できる。（IP アドレス数は 16~65536 個）

サブネット作成時にアベイラビリティゾーンを指定するが、作成後は変更できない。

サブネットごとにルートテーブルとネットワーク ACL を 1 つだけ指定する。

1 つの VPC で作れるサブネット数は 200 個。(リクエストすることで拡張できる)

サブネットの最初の 4 つと最後の 1 つのアドレスは予約されていて使用できない。(24 ビットマスクのサブネットだと使えないのは「0,1,2,3,255」の 5 つ)

必要以上にサブネットで分けるとアドレスの消費につながる。(28 ビットマスクで 16 個の IP が割り振られるが、実際は 11 個しか使えない)

サービスの中には IP アドレスの確保が必要な物がある。(ELB の場合は IP アドレスが 8 個)
